<!doctype html>
<html>
    <head>
        <title>World DB - MongoDB</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../../../css/global.css">
        <meta name="keywords" content="programmation, sql, r, sas, python, mongo, nosql, html, css, javascript, d3, google charts, chart.js">
        <meta name="description" content="Page professionnelle de FX Jollois, contenant des notes de programmation, des tutoriels et des slides de cours, ainsi que des liens vers les projets GitHub personnels">
        <meta name="author" content="Francois-Xavier Jollois">
        <meta name="copyright" content="&#xA9;">
    <link rel="stylesheet" href="../../../lib/highlight/styles/default.css">
</head>
    <body>
        <header><span>&#xE0; propos de <a href="../../../">moi</a></span><span class="sep">|</span><span>retour &#xE0; <a href="../../">tuto</a></span><span class="sep">|</span><span>retour &#xE0; <a href="../../">mongodb</a></span></header>
        <section><h1 id="worlddbmongodb">World DB - MongoDB</h1>

<p>Dans ce tutoriel, nous allons voir comment, &#xE0; partir d&apos;une base de donn&#xE9;es relationnelle
classique, nous pouvons passer &#xE0; une base de donn&#xE9;es de type NoSQL, et plus particuli&#xE8;rement 
une BD <em>Document Store</em>, orient&#xE9;e document. Pour cela, nous allons utiliser <a href="http://www.mongodb.org/">MongoDB</a></p>

<p><strong>MongoDB</strong> se base sur des documents JSON. Ceux-ci peuvent inclure des &#xE9;l&#xE9;ments de tout
type, dont des tableaux ou des objets complexes. </p>

<p>Pour information, la base de donn&#xE9;es de d&#xE9;part est au format <a href="http://www.sqlite.org/">SQLite</a>.</p>

<h2 id="labasededonnesdedpart">La base de donn&#xE9;es de d&#xE9;part</h2>

<script src="../lib/BDRschema.js"></script>
<div id="worldDB"></div>
<script>
var paper = Raphael("worldDB", 400, 200);
// paper.rect(0, 0, 400, 300);
tA = paper.table(0, 0, "Country", 
                 ["Code", "Name", "..."])
tB = paper.table(300, 0, "City", 
                 ["ID", "Name", "CodeCountry", "Population"])
tC = paper.table(200, 100, "CountryLanguage", 
                 [ "CodeCountry", "Language", "IsOfficiel", "Percentage"])
paper.connection(tA, tB)
paper.connection(tA, tC)
</script>

<h2 id="leschoixpourleschangements">Les choix pour les changements</h2>

<p>Ici, j&apos;ai fait le choix de n&apos;avoir qu&apos;un document JSON par pays, et donc pour chaque tuple
de la table <code>Country</code>, nous aurons un JSON int&#xE9;grant les informations de <code>City</code> et de
<code>CountryLanguage</code>. Voici ce &#xE0; quoi va ressembler le document pour un pays :</p>

<pre><code class="js">{
    Code: &quot;XXX&quot;,
    Name: &quot;Nom du pays&quot;,
    ...,
    Capital: { Name: &quot;Nom de la capitale&quot;, Population: 123456789 },
    Cities: [
        { Name: &quot;Nom de la ville&quot;, Population: 12345 },
        ...
    ],
    OffLang: [
        { Language: &quot;Nom de la langue&quot;, Percentage: 12.3 },
        ...
    ],
    NonOffLang: [
        { Language: &quot;Nom de la langue&quot;, Percentage: 12.3 },
        ...
    ]
}
</code></pre>

<p>Bien &#xE9;videmment, il faut g&#xE9;rer les cas particuliers :
- sans capitale,
- sans villes autre que la capitale, voire aucune ville associ&#xE9;e,
- sans langue officielle,
- sans langue non officielle.</p>

<p>Pour cela, les objets en seront pas pr&#xE9;sents dans le document du pays concern&#xE9;. C&apos;est l&#xE0;
la force des BD NoSQL justement, deux entit&#xE9;s peuvent avoir un sch&#xE9;ma diff&#xE9;rent. Cette
non pr&#xE9;sence de l&apos;information sera tr&#xE8;s bien g&#xE9;r&#xE9;e par la base de donn&#xE9;es. Lors d&apos;une
recherche sur la population de la capitale par exemple, les pays dont le document
correspondant n&apos;a pas le champs <code>Capital</code> ne seront pas pris en compte tout simplement.</p>

<h2 id="desqlitemongodb">De SQLite &#xE0; MongoDB</h2>

<p>Il nous faut donc cr&#xE9;er un script pour passer de l&apos;un &#xE0; l&apos;autre. J&apos;ai fait le choix de
le faire avec <a href="http://www.r-project.org">R</a>, car c&apos;est un logiciel que je ma&#xEE;trise bien.</p>

<p>Voici le code utilis&#xE9; :</p>

<pre><code class="r">a mettre
</code></pre>

<h2 id="requtagesqletnosqltypemongodb">Requ&#xEA;tage SQL et NoSQL - type MongoDB</h2>

<p>C&apos;est bien &#xE9;videmment ici la partie int&#xE9;ressante : nous allons regarder quelles sont les
diff&#xE9;rences entre un requ&#xEA;tage SQL sur la base de donn&#xE9;es au format relationnel (donc
sous SQLite) et un requ&#xEA;tage via MongoDB sur cette m&#xEA;me base de donn&#xE9;es, mais au format
<em>Document Store</em>.</p></section>
        <footer></footer>
    <script src="../../../lib/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script></body>
</html>